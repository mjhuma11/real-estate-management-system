<!DOCTYPE html>
<html>
<head>
    <title>Test Booking API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        button { padding: 10px 15px; margin: 5px; background-color: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        textarea { width: 100%; height: 150px; margin-top: 10px; }
        .response { margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>Test Booking API</h1>
    
    <div class="test-section">
        <h2>Create Booking Test</h2>
        <button onclick="testCreateBooking()">Test Create Booking</button>
        <div id="createBookingResponse" class="response"></div>
    </div>

    <script>
        async function testCreateBooking() {
            const responseDiv = document.getElementById('createBookingResponse');
            responseDiv.innerHTML = 'Testing...';
            
            try {
                // Sample booking data
                const bookingData = {
                    user_id: 1,
                    property_id: 1,
                    booking_type: 'sale',
                    booking_date: '2025-10-10',
                    total_property_price: 1000000,
                    booking_money_amount: 100000,
                    notes: 'Test booking'
                };

                const response = await fetch('http://localhost/WDPF/React-project/real-estate-management-system/API/create-booking.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(bookingData)
                });

                // Get response text first
                const responseText = await response.text();
                responseDiv.innerHTML = `
                    <h3>Response Details:</h3>
                    <p><strong>Status:</strong> ${response.status} ${response.statusText}</p>
                    <p><strong>Headers:</strong> ${JSON.stringify(Object.fromEntries(response.headers.entries()))}</p>
                    <h3>Response Text:</h3>
                    <pre>${responseText}</pre>
                `;

                // Try to parse JSON
                try {
                    const result = JSON.parse(responseText);
                    responseDiv.innerHTML += `
                        <h3>Parsed JSON:</h3>
                        <pre>${JSON.stringify(result, null, 2)}</pre>
                    `;
                } catch (e) {
                    responseDiv.innerHTML += `
                        <h3>JSON Parse Error:</h3>
                        <p>${e.message}</p>
                    `;
                }
            } catch (error) {
                responseDiv.innerHTML = `
                    <h3>Error:</h3>
                    <p>${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>