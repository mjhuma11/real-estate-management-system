<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Connection Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .test {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        .loading {
            background-color: #fff3cd;
            border-color: #ffeaa7;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>üîß Server Connection Test</h1>
    <p>This will test if your XAMPP/WAMP server is running and accessible.</p>

    <button onclick="testAllConnections()">üöÄ Test All Connections</button>
    <button onclick="clearResults()">üßπ Clear Results</button>

    <div id="results"></div>

    <script>
        const API_BASE = 'http://localhost/WDPF/React-project/real-estate-management-system/API';

        async function testConnection(url, description) {
            const resultDiv = document.getElementById('results');
            const testDiv = document.createElement('div');
            testDiv.className = 'test loading';
            testDiv.innerHTML = `<strong>${description}</strong><br>Testing: ${url}<br>Status: Loading...`;
            resultDiv.appendChild(testDiv);

            try {
                const response = await fetch(url);
                const text = await response.text();

                if (response.ok) {
                    testDiv.className = 'test success';
                    testDiv.innerHTML = `<strong>‚úÖ ${description}</strong><br>URL: ${url}<br>Status: SUCCESS (${response.status})<br>Response: ${text.substring(0, 200)}...`;
                } else {
                    testDiv.className = 'test error';
                    testDiv.innerHTML = `<strong>‚ùå ${description}</strong><br>URL: ${url}<br>Status: ERROR (${response.status})<br>Response: ${text.substring(0, 200)}...`;
                }
            } catch (error) {
                testDiv.className = 'test error';
                testDiv.innerHTML = `<strong>‚ùå ${description}</strong><br>URL: ${url}<br>Status: FAILED<br>Error: ${error.message}`;
            }
        }

        async function testAllConnections() {
            clearResults();

            // Test basic server
            await testConnection('http://localhost/', 'Basic Server Test');

            // Test API directory
            await testConnection(`${API_BASE}/`, 'API Directory Test');

            // Test simple PHP file
            await testConnection(`${API_BASE}/test-simple.php`, 'Simple PHP Test');

            // Test debug script
            await testConnection(`${API_BASE}/debug-server.php`, 'Debug Server Test');

            // Test CORS
            await testConnection(`${API_BASE}/cors-test.php`, 'CORS Test');

            // Test agents API
            await testConnection(`${API_BASE}/get-agents.php`, 'Agents API Test');

            // Test database
            await testConnection(`${API_BASE}/test-database.php`, 'Database Test');
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        // Auto-run test on page load
        window.onload = function () {
            setTimeout(testAllConnections, 1000);
        };
    </script>

    <hr>
    <h2>üìã Quick Checklist</h2>
    <ol>
        <li><strong>XAMPP/WAMP Running?</strong> - Check if Apache and MySQL are started (green status)</li>
        <li><strong>Correct Path?</strong> - Project should be in
            <code>C:\xampp\htdocs\WDPF\React-project\real-estate-management-system\</code>
        </li>
        <li><strong>Database Imported?</strong> - Import <code>API/netro-estate (10).sql</code> in phpMyAdmin</li>
        <li><strong>React App Running?</strong> - <code>npm run dev</code> should be running on port 5173</li>
    </ol>

    <h2>üîó Manual Test URLs</h2>
    <ul>
        <li><a href="http://localhost/" target="_blank">Basic Server</a></li>
        <li><a href="http://localhost/WDPF/React-project/real-estate-management-system/API/test-simple.php"
                target="_blank">Simple PHP Test</a></li>
        <li><a href="http://localhost/WDPF/React-project/real-estate-management-system/API/debug-server.php"
                target="_blank">Debug Server</a></li>
        <li><a href="http://localhost/phpmyadmin" target="_blank">phpMyAdmin</a></li>
    </ul>
</body>

</html>